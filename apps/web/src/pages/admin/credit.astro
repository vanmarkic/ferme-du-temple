---
import BaseLayout from '../../layouts/BaseLayout.astro';
import { requireAdmin } from '../../lib/auth';
import CreditCastorApp from '../../credit-castor/components/CreditCastorApp';

export const prerender = false; // This page must be server-rendered

// Require admin authentication
const authResult = await requireAdmin(Astro.cookies, '/admin/credit');

if (!authResult.authenticated) {
  return Astro.redirect(authResult.redirectTo);
}
---

<BaseLayout title="Credit Castor - La Ferme du Temple">
  <CreditCastorApp client:only="react" />
</BaseLayout>

<style is:global>
  /* Credit Castor uses Tailwind - ensure it works within ferme-du-temple */
  .credit-castor-container {
    min-height: 100vh;
  }
</style>
